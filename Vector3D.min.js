Vector3D=function(){function a(a,b,c){var d;null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),d=[a,b,c],this.x=d[0],this.y=d[1],this.z=d[2]}var b,c,d,e,f;for(f=["add","subtract","multiply","divide"],c=function(b){return a[b]=function(a,c){return a.copy()[b](c)}},d=0,e=f.length;e>d;d++)b=f[d],c(b);return a.prototype.copy=function(){return new a(this.x,this.y,this.z)},a.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},a.prototype.normalize=function(){var a;return a=this.magnitude(),a>0&&this.divide(a),this},a.prototype.limit=function(a){return this.magnitude()>a?(this.normalize(),this.multiply(a)):this},a.prototype.heading=function(){return-1*Math.atan2(-1*this.y,this.x)},a.prototype.eucl_distance=function(a){var b,c,d;return b=this.x-a.x,c=this.y-a.y,d=this.z-a.z,Math.sqrt(b*b+c*c+d*d)},a.prototype.distance=function(a,b){var c,d,e;return null===b&&(b=!1),c=Math.abs(this.x-a.x),d=Math.abs(this.y-a.y),e=Math.abs(this.z-a.z),b&&(c=c<b.width/2?c:b.width-c,d=d<b.height/2?d:b.height-d),Math.sqrt(c*c+d*d+e*e)},a.prototype.subtract=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.divide=function(a){var b;return b=[this.x/a,this.y/a,this.z/a],this.x=b[0],this.y=b[1],this.z=b[2],this},a.prototype.multiply=function(a){var b;return b=[this.x*a,this.y*a,this.z*a],this.x=b[0],this.y=b[1],this.z=b[2],this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.projectOnto=function(a){return a.copy().multiply(this.dot(a))},a.prototype.wrapRelativeTo=function(a,b){var c,d,e,f,g,h;g=this.copy(),h={x:"width",y:"height"};for(c in h)e=h[c],d=this[c]-a[c],f=b[e],Math.abs(d)>f/2&&(g[c]=d>0?-1*(f-this[c]):this[c]+f);return g},a.prototype.invalid=function(){return 1/0===this.x||isNaN(this.x)||1/0===this.y||isNaN(this.y)||1/0===this.z||isNaN(this.z)},a}();